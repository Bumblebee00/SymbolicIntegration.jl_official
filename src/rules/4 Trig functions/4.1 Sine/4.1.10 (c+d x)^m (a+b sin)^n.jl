file_rules = [
#(* ::Subsection::Closed:: *)
#(* 4.1.10 (c+d x)^m (a+b sin)^n *)
("4_1_10_1",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)*sin((~!e) + (~!f)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~x)) &&
    gt((~m), 0) ?
-((~c) + (~d)*(~x))^(~m)*cos((~e) + (~f)*(~x))⨸(~f) + (~d)*(~m)⨸(~f)*∫(((~c) + (~d)*(~x))^((~m) - 1)*cos((~e) + (~f)*(~x)), (~x)) : nothing)

("4_1_10_2",
@rule ∫(((~!c) + (~!d)*(~x))^(~m)*sin((~!e) + (~!f)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~x)) &&
    lt((~m), -1) ?
((~c) + (~d)*(~x))^((~m) + 1)*sin((~e) + (~f)*(~x))⨸((~d)*((~m) + 1)) - (~f)⨸((~d)*((~m) + 1))*∫(((~c) + (~d)*(~x))^((~m) + 1)*cos((~e) + (~f)*(~x)), (~x)) : nothing)

# ("4_1_10_3",
# @rule ∫(sin((~!e) + (~!f)*Complex[0, (~fz)]*(~x))/((~!c) + (~!d)*(~x)),(~x)) =>
#     !contains_var((~c), (~d), (~e), (~f), (~fz), (~x)) &&
#     eq((~d)*(~e) - (~c)*(~f)*(~fz)*(~I), 0) ?
# (~I)*SinhIntegral[(~c)*(~f)*(~fz)⨸(~d) + (~f)*(~fz)*(~x)]⨸(~d) : nothing)

("4_1_10_4",
@rule ∫(sin((~!e) + (~!f)*(~x))/((~!c) + (~!d)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~x)) &&
    eq((~d)*(~e) - (~c)*(~f), 0) ?
SymbolicUtils.sinint((~e) + (~f)*(~x))⨸(~d) : nothing)

# ("4_1_10_5",
# @rule ∫(sin((~!e) + (~!f)*Complex[0, (~fz)]*(~x))/((~!c) + (~!d)*(~x)),(~x)) =>
#     !contains_var((~c), (~d), (~e), (~f), (~fz), (~x)) &&
#     eq((~d)*((~e) - π/2) - (~c)*(~f)*(~fz)*(~I), 0) &&
#     neg((~c)*(~f)*(~fz)/(~d), 0) ?
# CoshIntegral[-(~c)*(~f)*(~fz)⨸(~d) - (~f)*(~fz)*(~x)]⨸(~d) : nothing)
# 
# ("4_1_10_6",
# @rule ∫(sin((~!e) + (~!f)*Complex[0, (~fz)]*(~x))/((~!c) + (~!d)*(~x)),(~x)) =>
#     !contains_var((~c), (~d), (~e), (~f), (~fz), (~x)) &&
#     eq((~d)*((~e) - π/2) - (~c)*(~f)*(~fz)*(~I), 0) ?
# CoshIntegral[(~c)*(~f)*(~fz)⨸(~d) + (~f)*(~fz)*(~x)]⨸(~d) : nothing)

("4_1_10_7",
@rule ∫(sin((~!e) + (~!f)*(~x))/((~!c) + (~!d)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~x)) &&
    eq((~d)*((~e) - π/2) - (~c)*(~f), 0) ?
SymbolicUtils.cosint((~e) - π⨸2 + (~f)*(~x))⨸(~d) : nothing)

("4_1_10_8",
@rule ∫(sin((~!e) + (~!f)*(~x))/((~!c) + (~!d)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~x)) &&
    !eq((~d)*(~e) - (~c)*(~f), 0) ?
cos(((~d)*(~e) - (~c)*(~f))⨸(~d))*∫(sin((~c)*(~f)⨸(~d) + (~f)*(~x))⨸((~c) + (~d)*(~x)), (~x)) + sin(((~d)*(~e) - (~c)*(~f))⨸(~d))*∫(cos((~c)*(~f)⨸(~d) + (~f)*(~x))⨸((~c) + (~d)*(~x)), (~x)) : nothing)

("4_1_10_9",
@rule ∫(sin((~!e) + π/2 + (~!f)*(~x))/sqrt((~!c) + (~!d)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~x)) &&
    complexfree((~f)) &&
    eq((~d)*(~e) - (~c)*(~f), 0) ?
2⨸(~d)*int_and_subst(cos((~f)*(~x)^2⨸(~d)),  (~x), (~x), sqrt((~c) + (~d)*(~x)), "4_1_10_9") : nothing)

("4_1_10_10",
@rule ∫(sin((~!e) + (~!f)*(~x))/sqrt((~!c) + (~!d)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~x)) &&
    complexfree((~f)) &&
    eq((~d)*(~e) - (~c)*(~f), 0) ?
2⨸(~d)*int_and_subst(sin((~f)*(~x)^2⨸(~d)),  (~x), (~x), sqrt((~c) + (~d)*(~x)), "4_1_10_10") : nothing)

("4_1_10_11",
@rule ∫(sin((~!e) + (~!f)*(~x))/sqrt((~!c) + (~!d)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~x)) &&
    complexfree((~f)) &&
    !eq((~d)*(~e) - (~c)*(~f), 0) ?
cos(((~d)*(~e) - (~c)*(~f))⨸(~d))*∫(sin((~c)*(~f)⨸(~d) + (~f)*(~x))⨸sqrt((~c) + (~d)*(~x)), (~x)) + sin(((~d)*(~e) - (~c)*(~f))⨸(~d))*∫(cos((~c)*(~f)⨸(~d) + (~f)*(~x))⨸sqrt((~c) + (~d)*(~x)), (~x)) : nothing)

("4_1_10_12",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)*sin((~!e) + (~!k)*π + (~!f)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~m), (~x)) &&
    ext_isinteger(2*(~k)) ?
(~I)⨸2*∫(((~c) + (~d)*(~x))^(~m)*ℯ^(-(~I)*(~k)*π)*ℯ^(-(~I)*((~e) + (~f)*(~x))), (~x)) - (~I)⨸2*∫(((~c) + (~d)*(~x))^(~m)*ℯ^((~I)*(~k)*π)*ℯ^((~I)*((~e) + (~f)*(~x))), (~x)) : nothing)

("4_1_10_13",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)*sin((~!e) + (~!f)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~m), (~x)) ?
(~I)⨸2*∫(((~c) + (~d)*(~x))^(~m)*ℯ^(-(~I)*((~e) + (~f)*(~x))), (~x)) - (~I)⨸2*∫(((~c) + (~d)*(~x))^(~m)*ℯ^((~I)*((~e) + (~f)*(~x))), (~x)) : nothing)

("4_1_10_14",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)*sin((~!e) + (~!f)*(~x)/2)^2,(~x)) =>
    !contains_var((~c), (~d), (~e), (~f), (~m), (~x)) ?
1⨸2*∫(((~c) + (~d)*(~x))^(~m), (~x)) - 1⨸2*∫(((~c) + (~d)*(~x))^(~m)*cos(2*(~e) + (~f)*(~x)), (~x)) : nothing)

("4_1_10_15",
@rule ∫(((~!c) + (~!d)*(~x))*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~b), (~c), (~d), (~e), (~f), (~x)) &&
    gt((~n), 1) ?
(~d)*((~b)*sin((~e) + (~f)*(~x)))^(~n)⨸((~f)^2*(~n)^2) - (~b)*((~c) + (~d)*(~x))*cos((~e) + (~f)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~n) - 1)⨸((~f)*(~n)) + (~b)^2*((~n) - 1)⨸(~n)*∫(((~c) + (~d)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~n) - 2), (~x)) : nothing)

("4_1_10_16",
@rule ∫(((~!c) + (~!d)*(~x))^(~m)*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~b), (~c), (~d), (~e), (~f), (~x)) &&
    gt((~n), 1) &&
    gt((~m), 1) ?
(~d)*(~m)*((~c) + (~d)*(~x))^((~m) - 1)*((~b)*sin((~e) + (~f)*(~x)))^(~n)⨸((~f)^2*(~n)^2) - (~b)*((~c) + (~d)*(~x))^(~m)*cos((~e) + (~f)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~n) - 1)⨸((~f)*(~n)) + (~b)^2*((~n) - 1)⨸(~n)*∫(((~c) + (~d)*(~x))^(~m)*((~b)*sin((~e) + (~f)*(~x)))^((~n) - 2), (~x)) - (~d)^2*(~m)*((~m) - 1)⨸((~f)^2*(~n)^2)* ∫(((~c) + (~d)*(~x))^((~m) - 2)*((~b)*sin((~e) + (~f)*(~x)))^(~n), (~x)) : nothing)

# ("4_1_10_17",
# @rule ∫(((~!c) + (~!d)*(~x))^(~m)*sin((~!e) + (~!f)*(~x))^(~n),(~x)) =>
#     !contains_var((~c), (~d), (~e), (~f), (~m), (~x)) &&
#     igt((~n), 1) &&
#     (
#         !(isrational((~m))) ||
#         ge((~m), -1) &&
#         lt((~m), 1)
#     ) ?
# ∫(ExpandTrigReduce[((~c) + (~d)*(~x))^(~m), sin((~e) + (~f)*(~x))^(~n), (~x)], (~x)) : nothing)
# 
# ("4_1_10_18",
# @rule ∫(((~!c) + (~!d)*(~x))^(~m)*sin((~!e) + (~!f)*(~x))^(~n),(~x)) =>
#     !contains_var((~c), (~d), (~e), (~f), (~m), (~x)) &&
#     igt((~n), 1) &&
#     ge((~m), -2) &&
#     lt((~m), -1) ?
# ((~c) + (~d)*(~x))^((~m) + 1)*sin((~e) + (~f)*(~x))^(~n)⨸((~d)*((~m) + 1)) - (~f)*(~n)⨸((~d)*((~m) + 1))* ∫(ExpandTrigReduce[((~c) + (~d)*(~x))^((~m) + 1), cos((~e) + (~f)*(~x))*sin((~e) + (~f)*(~x))^((~n) - 1), (~x)], (~x)) : nothing)

("4_1_10_19",
@rule ∫(((~!c) + (~!d)*(~x))^(~m)*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~b), (~c), (~d), (~e), (~f), (~x)) &&
    gt((~n), 1) &&
    lt((~m), -2) ?
((~c) + (~d)*(~x))^((~m) + 1)*((~b)*sin((~e) + (~f)*(~x)))^(~n)⨸((~d)*((~m) + 1)) - (~b)*(~f)*(~n)*((~c) + (~d)*(~x))^((~m) + 2)* cos((~e) + (~f)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~n) - 1)⨸((~d)^2*((~m) + 1)*((~m) + 2)) - (~f)^2*(~n)^2⨸((~d)^2*((~m) + 1)*((~m) + 2))* ∫(((~c) + (~d)*(~x))^((~m) + 2)*((~b)*sin((~e) + (~f)*(~x)))^(~n), (~x)) + (~b)^2*(~f)^2*(~n)*((~n) - 1)⨸((~d)^2*((~m) + 1)*((~m) + 2))* ∫(((~c) + (~d)*(~x))^((~m) + 2)*((~b)*sin((~e) + (~f)*(~x)))^((~n) - 2), (~x)) : nothing)

("4_1_10_20",
@rule ∫(((~!c) + (~!d)*(~x))*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~b), (~c), (~d), (~e), (~f), (~x)) &&
    lt((~n), -1) &&
    !eq((~n), -2) ?
((~c) + (~d)*(~x))*cos((~e) + (~f)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 1)⨸((~b)*(~f)*((~n) + 1)) - (~d)*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 2)⨸((~b)^2*(~f)^2*((~n) + 1)*((~n) + 2)) + ((~n) + 2)⨸((~b)^2*((~n) + 1))* ∫(((~c) + (~d)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 2), (~x)) : nothing)

("4_1_10_21",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~b), (~c), (~d), (~e), (~f), (~x)) &&
    lt((~n), -1) &&
    !eq((~n), -2) &&
    gt((~m), 1) ?
((~c) + (~d)*(~x))^(~m)*cos((~e) + (~f)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 1)⨸((~b)*(~f)*((~n) + 1)) - (~d)*(~m)*((~c) + (~d)*(~x))^((~m) - 1)*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 2)⨸((~b)^2* (~f)^2*((~n) + 1)*((~n) + 2)) + ((~n) + 2)⨸((~b)^2*((~n) + 1))* ∫(((~c) + (~d)*(~x))^(~m)*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 2), (~x)) + (~d)^2*(~m)*((~m) - 1)⨸((~b)^2*(~f)^2*((~n) + 1)*((~n) + 2))* ∫(((~c) + (~d)*(~x))^((~m) - 2)*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 2), (~x)) : nothing)

("4_1_10_22",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)*((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~m), (~x)) &&
    igt((~n), 0) &&
    (
        eq((~n), 1) ||
        igt((~m), 0) ||
        !eq((~a)^2 - (~b)^2, 0)
    ) ?
∫(ext_expand(((~c) + (~d)*(~x))^(~m), ((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~n), (~x)), (~x)) : nothing)

("4_1_10_23",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)*((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~m), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) &&
    ext_isinteger((~n)) &&
    (
        gt((~n), 0) ||
        igt((~m), 0)
    ) ?
(2*(~a))^(~n)* ∫(((~c) + (~d)*(~x))^(~m)*sin(1⨸2*((~e) + π*(~a)⨸(2*(~b))) + (~f)*(~x)⨸2)^(2*(~n)), (~x)) : nothing)

("4_1_10_24",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)*((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~m), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) &&
    ext_isinteger((~n) + 1/2) &&
    (
        gt((~n), 0) ||
        igt((~m), 0)
    ) ?
(2*(~a))^intpart((~n))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^fracpart((~n))⨸ sin((~e)⨸2 + (~a)*π⨸(4*(~b)) + (~f)*(~x)⨸2)^(2*fracpart((~n)))* ∫(((~c) + (~d)*(~x))^(~m)*sin((~e)⨸2 + (~a)*π⨸(4*(~b)) + (~f)*(~x)⨸2)^(2*(~n)), (~x)) : nothing)

#(* Int[(c_.+d_.*x_)^m_.*(a_+b_.*sin[e_.+f_.*x_])^n_.,x_Symbol] := (2*a)^n*Int[(c+d*x)^m*Cos[1/2*(e-Pi*a/(2*b))+f*x/2]^(2*n),x] /; FreeQ[{a,b,c,d,e,f,m},x] && EqQ[a^2-b^2,0] && IntegerQ[n] &&  (GtQ[n,0] || IGtQ[m,0]) *)
#(* Int[(c_.+d_.*x_)^m_.*(a_+b_.*sin[e_.+f_.*x_])^n_,x_Symbol] := (2*a)^IntPart[n]*(a+b*Sin[e+f*x])^FracPart[n]/Cos[1/2*(e-Pi*a/(2*b)) +f*x/2]^(2*FracPart[n])* Int[(c+d*x)^m*Cos[1/2*(e-Pi*a/(2*b))+f*x/2]^(2*n),x] /; FreeQ[{a,b,c,d,e,f,m},x] && EqQ[a^2-b^2,0] && IntegerQ[n+1/2] &&  (GtQ[n,0] || IGtQ[m,0]) *)
# ("4_1_10_25",
# @rule ∫(((~!c) + (~!d)*(~x))^ (~!m)/((~a) + (~!b)*sin((~!e) + (~!k)*π + (~!f)*Complex[0, (~fz)]*(~x))),(~x)) =>
#     !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~fz), (~x)) &&
#     ext_isinteger(2*(~k)) &&
#     !eq((~a)^2 - (~b)^2, 0) &&
#     igt((~m), 0) ?
# 2*∫(((~c) + (~d)*(~x))^(~m)*ℯ^(-(~I)*π*((~k) - 1⨸2))* ℯ^(-(~I)*(~e) + (~f)*(~fz)*(~x))⨸((~b) + 2*(~a)*ℯ^(-(~I)*π*((~k) - 1⨸2))*ℯ^(-(~I)*(~e) + (~f)*(~fz)*(~x)) - (~b)*ℯ^(-2*(~I)*(~k)*π)*ℯ^(2*(-(~I)*(~e) + (~f)*(~fz)*(~x)))), (~x)) : nothing)

("4_1_10_26",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)/((~a) + (~!b)*sin((~!e) + (~!k)*π + (~!f)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~x)) &&
    ext_isinteger(2*(~k)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    igt((~m), 0) ?
2*∫(((~c) + (~d)*(~x))^(~m)*ℯ^((~I)*π*((~k) - 1⨸2))* ℯ^((~I)*((~e) + (~f)*(~x)))⨸((~b) + 2*(~a)*ℯ^((~I)*π*((~k) - 1⨸2))*ℯ^((~I)*((~e) + (~f)*(~x))) - (~b)*ℯ^(2*(~I)*(~k)*π)*ℯ^(2*(~I)*((~e) + (~f)*(~x)))), (~x)) : nothing)

#(* Int[(c_.+d_.*x_)^m_./(a_+b_.*sin[e_.+f_.*Complex[0,fz_]*x_]),x_ Symbol] := 2*I*Int[(c+d*x)^m*E^(-I*e+f*fz*x)/(b+2*I*a*E^(-I*e+f*fz*x)-b*E^(2*(- I*e+f*fz*x))),x] /; FreeQ[{a,b,c,d,e,f,fz},x] && NeQ[a^2-b^2,0] && IGtQ[m,0] *)
#(* Int[(c_.+d_.*x_)^m_./(a_+b_.*sin[e_.+f_.*x_]),x_Symbol] := -2*I*Int[(c+d*x)^m*E^(I*(e+f*x))/(b-2*I*a*E^(I*(e+f*x))-b*E^(2*I*(e+ f*x))),x] /; FreeQ[{a,b,c,d,e,f},x] && NeQ[a^2-b^2,0] && IGtQ[m,0] *)
# ("4_1_10_27",
# @rule ∫(((~!c) + (~!d)*(~x))^(~!m)/((~a) + (~!b)*sin((~!e) + (~!f)*Complex[0, (~fz)]*(~x))),(~x)) =>
#     !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~fz), (~x)) &&
#     !eq((~a)^2 - (~b)^2, 0) &&
#     igt((~m), 0) ?
# 2*∫(((~c) + (~d)*(~x))^(~m)* ℯ^(-(~I)*(~e) + (~f)*(~fz)*(~x))⨸(-(~I)*(~b) + 2*(~a)*ℯ^(-(~I)*(~e) + (~f)*(~fz)*(~x)) + (~I)*(~b)*ℯ^(2*(-(~I)*(~e) + (~f)*(~fz)*(~x)))), (~x)) : nothing)

("4_1_10_28",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)/((~a) + (~!b)*sin((~!e) + (~!f)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    igt((~m), 0) ?
2*∫(((~c) + (~d)*(~x))^(~m)* ℯ^((~I)*((~e) + (~f)*(~x)))⨸((~I)*(~b) + 2*(~a)*ℯ^((~I)*((~e) + (~f)*(~x))) - (~I)*(~b)*ℯ^(2*(~I)*((~e) + (~f)*(~x)))), (~x)) : nothing)

("4_1_10_29",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)/((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^2,(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    igt((~m), 0) ?
(~b)*((~c) + (~d)*(~x))^(~m)*cos((~e) + (~f)*(~x))⨸((~f)*((~a)^2 - (~b)^2)*((~a) + (~b)*sin((~e) + (~f)*(~x)))) + (~a)⨸((~a)^2 - (~b)^2)*∫(((~c) + (~d)*(~x))^(~m)⨸((~a) + (~b)*sin((~e) + (~f)*(~x))), (~x)) - (~b)*(~d)*(~m)⨸((~f)*((~a)^2 - (~b)^2))* ∫(((~c) + (~d)*(~x))^((~m) - 1)*cos((~e) + (~f)*(~x))⨸((~a) + (~b)*sin((~e) + (~f)*(~x))), (~x)) : nothing)

("4_1_10_30",
@rule ∫(((~!c) + (~!d)*(~x))^(~!m)*((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    ilt((~n), -2) &&
    igt((~m), 0) ?
-(~b)*((~c) + (~d)*(~x))^(~m)* cos((~e) + (~f)* (~x))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~n) + 1)⨸((~f)*((~n) + 1)*((~a)^2 - (~b)^2)) + (~a)⨸((~a)^2 - (~b)^2)* ∫(((~c) + (~d)*(~x))^(~m)*((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~n) + 1), (~x)) + (~b)*(~d)*(~m)⨸((~f)*((~n) + 1)*((~a)^2 - (~b)^2))* ∫(((~c) + (~d)*(~x))^((~m) - 1)*cos((~e) + (~f)*(~x))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~n) + 1), (~x)) - (~b)*((~n) + 2)⨸(((~n) + 1)*((~a)^2 - (~b)^2))* ∫(((~c) + (~d)*(~x))^(~m)*sin((~e) + (~f)*(~x))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~n) + 1), (~x)) : nothing)

# ("4_1_10_31",
# @rule ∫(((~!c) + (~!d)*(~x))^(~!m)*((~!a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~!n),(~x)) =>
#     !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~m), (~n), (~x)) ?
# Unintegrable[((~c) + (~d)*(~x))^(~m)*((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~n), (~x)] : nothing)

("4_1_10_32",
@rule ∫((~u)^(~!m)*((~!a) + (~!b)*sin((~v)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~m), (~n), (~x)) &&
    linear((~u), (~v), (~x)) &&
    !(linear_without_simplify((~u), (~v), (~x))) ?
∫(expand_to_sum((~u), (~x))^(~m)*((~a) + (~b)*sin(expand_to_sum((~v), (~x))))^(~n), (~x)) : nothing)

("4_1_10_33",
@rule ∫((~u)^(~!m)*((~!a) + (~!b)*cos((~v)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~m), (~n), (~x)) &&
    linear((~u), (~v), (~x)) &&
    !(linear_without_simplify((~u), (~v), (~x))) ?
∫(expand_to_sum((~u), (~x))^(~m)*((~a) + (~b)*cos(expand_to_sum((~v), (~x))))^(~n), (~x)) : nothing)


]
