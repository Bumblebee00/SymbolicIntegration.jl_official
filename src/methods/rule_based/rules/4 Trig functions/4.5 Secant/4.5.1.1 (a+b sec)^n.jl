file_rules = [
#(* ::Subsection::Closed:: *)
#(* 4.5.1.1 (a+b sec)^n *)
("4_5_1_1_1",
@rule ∫(csc((~!c) + (~!d)*(~x))^(~n),(~x)) =>
    !contains_var((~c), (~d), (~x)) &&
    igt((~n)/2, 0) ?
-1⨸(~d)*int_and_subst(ext_expand((1 + (~x)^2)^((~n)⨸2 - 1),  (~x)), (~x), (~x), cot((~c) + (~d)*(~x)), "4_5_1_1_1") : nothing)

("4_5_1_1_2",
@rule ∫(((~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~b), (~c), (~d), (~x)) &&
    gt((~n), 1) &&
    ext_isinteger(2*(~n)) ?
-(~b)*cos((~c) + (~d)*(~x))*((~b)*csc((~c) + (~d)*(~x)))^((~n) - 1)⨸((~d)*((~n) - 1)) + (~b)^2*((~n) - 2)⨸((~n) - 1)*∫(((~b)*csc((~c) + (~d)*(~x)))^((~n) - 2), (~x)) : nothing)

("4_5_1_1_3",
@rule ∫(((~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~b), (~c), (~d), (~x)) &&
    lt((~n), -1) &&
    ext_isinteger(2*(~n)) ?
cos((~c) + (~d)*(~x))*((~b)*csc((~c) + (~d)*(~x)))^((~n) + 1)⨸((~b)*(~d)*(~n)) + ((~n) + 1)⨸((~b)^2*(~n))*∫(((~b)*csc((~c) + (~d)*(~x)))^((~n) + 2), (~x)) : nothing)

#(* original line: Int[csc[c_. + d_.*x_], x_Symbol] := (* -ArcCoth[Cos[c+d*x]]/d /; *) -ArcTanh[Cos[c + d*x]]/d /; FreeQ[{c, d}, x] *)
("4_5_1_1_4",
@rule ∫(csc((~!c) + (~!d)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~x)) ?
-atanh(cos((~c) + (~d)*(~x)))⨸(~d) : nothing)

("4_5_1_1_4_1",
@rule ∫(sec((~!c) + (~!d)*(~x)),(~x)) =>
    !contains_var((~c), (~d), (~x)) ?
atanh(sin((~c) + (~d)*(~x)))⨸(~d) : nothing)

#(* Int[1/csc[c_.+d_.*x_],x_Symbol] := -Cos[c+d*x]/d /; FreeQ[{c,d},x] *)
("4_5_1_1_5",
@rule ∫(((~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~b), (~c), (~d), (~x)) &&
    eq((~n)^2, 1/4) ?
((~b)*csc((~c) + (~d)*(~x)))^(~n)*sin((~c) + (~d)*(~x))^(~n)*∫(1⨸sin((~c) + (~d)*(~x))^(~n), (~x)) : nothing)

("4_5_1_1_6",
@rule ∫(((~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~b), (~c), (~d), (~n), (~x)) &&
    !(ext_isinteger((~n))) ?
((~b)*csc((~c) + (~d)*(~x)))^((~n) - 1)*((sin((~c) + (~d)*(~x))⨸(~b))^((~n) - 1)* ∫(1⨸(sin((~c) + (~d)*(~x))⨸(~b))^(~n), (~x))) : nothing)

("4_5_1_1_7",
@rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^2,(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) ?
(~a)^2*(~x) + 2*(~a)*(~b)*∫(csc((~c) + (~d)*(~x)), (~x)) + (~b)^2*∫(csc((~c) + (~d)*(~x))^2, (~x)) : nothing)

("4_5_1_1_8",
@rule ∫(sqrt((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) ?
-2*(~b)⨸(~d)* int_and_subst(1⨸((~a) + (~x)^2),  (~x), (~x), (~b)*cot((~c) + (~d)*(~x))⨸sqrt((~a) + (~b)*csc((~c) + (~d)*(~x))), "4_5_1_1_8") : nothing)

("4_5_1_1_9",
@rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) &&
    gt((~n), 1) &&
    ext_isinteger(2*(~n)) ?
-(~b)^2*cot((~c) + (~d)*(~x))*((~a) + (~b)*csc((~c) + (~d)*(~x)))^((~n) - 2)⨸((~d)*((~n) - 1)) + (~a)⨸((~n) - 1)* ∫(((~a) + (~b)*csc((~c) + (~d)*(~x)))^((~n) - 2)*((~a)*((~n) - 1) + (~b)*(3*(~n) - 4)*csc((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_1_10",
@rule ∫(1/sqrt((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) ?
1⨸(~a)*∫(sqrt((~a) + (~b)*csc((~c) + (~d)*(~x))), (~x)) - (~b)⨸(~a)*∫(csc((~c) + (~d)*(~x))⨸sqrt((~a) + (~b)*csc((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_1_11",
@rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) &&
    le((~n), -1) &&
    ext_isinteger(2*(~n)) ?
-cot((~c) + (~d)*(~x))*((~a) + (~b)*csc((~c) + (~d)*(~x)))^(~n)⨸((~d)*(2*(~n) + 1)) + 1⨸((~a)^2*(2*(~n) + 1))* ∫(((~a) + (~b)*csc((~c) + (~d)*(~x)))^((~n) + 1)*((~a)*(2*(~n) + 1) - (~b)*((~n) + 1)*csc((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_1_12",
@rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~n), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) &&
    !(ext_isinteger(2*(~n))) &&
    gt((~a), 0) ?
(~a)^(~n)*cot( (~c) + (~d)*(~x))⨸((~d)*sqrt(1 + csc((~c) + (~d)*(~x)))*sqrt(1 - csc((~c) + (~d)*(~x))))* int_and_subst((1 + (~b)*(~x)⨸(~a))^((~n) - 1⨸2)⨸((~x)*sqrt(1 - (~b)*(~x)⨸(~a))),  (~x), (~x), csc((~c) + (~d)*(~x)), "4_5_1_1_12") : nothing)

("4_5_1_1_13",
@rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~n), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) &&
    !(ext_isinteger(2*(~n))) &&
    !(gt((~a), 0)) ?
(~a)^intpart((~n))*((~a) + (~b)*csc((~c) + (~d)*(~x)))^ fracpart((~n))⨸(1 + (~b)⨸(~a)*csc((~c) + (~d)*(~x)))^fracpart((~n))* ∫((1 + (~b)⨸(~a)*csc((~c) + (~d)*(~x)))^(~n), (~x)) : nothing)

("4_5_1_1_14",
@rule ∫(sqrt((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) ?
2*((~a) + (~b)*csc((~c) + (~d)*(~x)))⨸((~d)*rt((~a) + (~b), 2)*cot((~c) + (~d)*(~x)))* sqrt((~b)*(1 + csc((~c) + (~d)*(~x)))⨸((~a) + (~b)*csc((~c) + (~d)*(~x))))* sqrt(-(~b)*(1 - csc((~c) + (~d)*(~x)))⨸((~a) + (~b)*csc((~c) + (~d)*(~x))))* elliptic_pi((~a)⨸((~a) + (~b)), asin(rt((~a) + (~b), 2)⨸sqrt((~a) + (~b)*csc((~c) + (~d)*(~x)))), ((~a) - (~b))⨸((~a) + (~b))) : nothing)

("4_5_1_1_15",
@rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(3//2),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) ?
∫(((~a)^2 + (~b)*(2*(~a) - (~b))*csc((~c) + (~d)*(~x)))⨸sqrt((~a) + (~b)*csc((~c) + (~d)*(~x))), (~x)) + (~b)^2* ∫(csc((~c) + (~d)*(~x))*(1 + csc((~c) + (~d)*(~x)))⨸sqrt((~a) + (~b)*csc((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_1_16",
@rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    gt((~n), 2) &&
    ext_isinteger(2*(~n)) ?
-(~b)^2*cot((~c) + (~d)*(~x))*((~a) + (~b)*csc((~c) + (~d)*(~x)))^((~n) - 2)⨸((~d)*((~n) - 1)) + 1⨸((~n) - 1)*∫(((~a) + (~b)*csc((~c) + (~d)*(~x)))^((~n) - 3)* simp((~a)^3*((~n) - 1) + ((~b)*((~b)^2*((~n) - 2) + 3*(~a)^2*((~n) - 1)))* csc((~c) + (~d)*(~x)) + ((~a)*(~b)^2*(3*(~n) - 4))*csc((~c) + (~d)*(~x))^2, (~x)), (~x)) : nothing)

("4_5_1_1_17",
@rule ∫(1/((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) ?
(~x)⨸(~a) - 1⨸(~a)*∫(1⨸(1 + (~a)⨸(~b)*sin((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_1_18",
@rule ∫(1/sqrt((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) ?
2*rt((~a) + (~b), 2)⨸((~a)*(~d)*cot((~c) + (~d)*(~x)))* sqrt((~b)*(1 - csc((~c) + (~d)*(~x)))⨸((~a) + (~b)))* sqrt(-(~b)*(1 + csc((~c) + (~d)*(~x)))⨸((~a) - (~b)))* elliptic_pi(((~a) + (~b))⨸(~a), asin(sqrt((~a) + (~b)*csc((~c) + (~d)*(~x)))⨸rt((~a) + (~b), 2)), ((~a) + (~b))⨸((~a) - (~b))) : nothing)

("4_5_1_1_19",
@rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    lt((~n), -1) &&
    ext_isinteger(2*(~n)) ?
(~b)^2*cot( (~c) + (~d)*(~x))*((~a) + (~b)*csc((~c) + (~d)*(~x)))^((~n) + 1)⨸((~a)*(~d)*((~n) + 1)*((~a)^2 - (~b)^2)) + 1⨸((~a)*((~n) + 1)*((~a)^2 - (~b)^2))* ∫(((~a) + (~b)*csc((~c) + (~d)*(~x)))^((~n) + 1)* simp(((~a)^2 - (~b)^2)*((~n) + 1) - (~a)*(~b)*((~n) + 1)*csc((~c) + (~d)*(~x)) + (~b)^2*((~n) + 2)*csc((~c) + (~d)*(~x))^2, (~x)), (~x)) : nothing)

# ("4_5_1_1_20",
# @rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
#     !contains_var((~a), (~b), (~c), (~d), (~n), (~x)) &&
#     !eq((~a)^2 - (~b)^2, 0) &&
#     !(ext_isinteger(2*(~n))) ?
# Unintegrable[((~a) + (~b)*csc((~c) + (~d)*(~x)))^(~n), (~x)] : nothing)


]
