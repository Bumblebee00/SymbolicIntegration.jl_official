file_rules = [
#(* ::Subsection::Closed:: *)
#(* 4.5.1.4 (d tan)^n (a+b sec)^m *)
("4_5_1_4_1",
@rule ∫(cot((~!c) + (~!d)*(~x))^(~!m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    ext_isinteger(((~m) - 1)/2) &&
    eq((~a)^2 - (~b)^2, 0) &&
    ext_isinteger((~n)) ?
1⨸((~a)^((~m) - (~n) - 1)*(~b)^(~n)*(~d))* int_and_subst(((~a) - (~b)*(~x))^(((~m) - 1)⨸2)*((~a) + (~b)*(~x))^(((~m) - 1)⨸2 + (~n))⨸ (~x)^((~m) + (~n)),  (~x), (~x), sin((~c) + (~d)*(~x)), "4_5_1_4_1") : nothing)

("4_5_1_4_2",
@rule ∫(cot((~!c) + (~!d)*(~x))^(~!m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~n), (~x)) &&
    ext_isinteger(((~m) - 1)/2) &&
    eq((~a)^2 - (~b)^2, 0) &&
    !(ext_isinteger((~n))) ?
-1⨸((~d)*(~b)^((~m) - 1))* int_and_subst((-(~a) + (~b)*(~x))^(((~m) - 1)⨸2)*((~a) + (~b)*(~x))^(((~m) - 1)⨸2 + (~n))⨸(~x),  (~x), (~x), csc((~c) + (~d)*(~x)), "4_5_1_4_2") : nothing)

("4_5_1_4_3",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~x)) &&
    gt((~m), 1) ?
-(~e)*((~e)*cot((~c) + (~d)*(~x)))^((~m) - 1)*((~a)*(~m) + (~b)*((~m) - 1)*csc((~c) + (~d)*(~x)))⨸((~d)* (~m)*((~m) - 1)) - (~e)^2⨸(~m)* ∫(((~e)*cot((~c) + (~d)*(~x)))^((~m) - 2)*((~a)*(~m) + (~b)*((~m) - 1)*csc((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_4_4",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~x)) &&
    lt((~m), -1) ?
-((~e)*cot((~c) + (~d)*(~x)))^((~m) + 1)*((~a) + (~b)*csc((~c) + (~d)*(~x)))⨸((~d)*(~e)*((~m) + 1)) - 1⨸((~e)^2*((~m) + 1))* ∫(((~e)*cot((~c) + (~d)*(~x)))^((~m) + 2)*((~a)*((~m) + 1) + (~b)*((~m) + 2)*csc((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_4_5",
@rule ∫(((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))/cot((~!c) + (~!d)*(~x)),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) ?
∫(((~b) + (~a)*sin((~c) + (~d)*(~x)))⨸cos((~c) + (~d)*(~x)), (~x)) : nothing)

("4_5_1_4_6",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~!m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~m), (~x)) ?
(~a)*∫(((~e)*cot((~c) + (~d)*(~x)))^(~m), (~x)) + (~b)*∫(((~e)*cot((~c) + (~d)*(~x)))^(~m)*csc((~c) + (~d)*(~x)), (~x)) : nothing)

("4_5_1_4_7",
@rule ∫(cot((~!c) + (~!d)*(~x))^(~!m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~n), (~x)) &&
    ext_isinteger(((~m) - 1)/2) &&
    !eq((~a)^2 - (~b)^2, 0) ?
-(-1)^(((~m) - 1)⨸2)⨸((~d)*(~b)^((~m) - 1))* int_and_subst(((~b)^2 - (~x)^2)^(((~m) - 1)⨸2)*((~a) + (~x))^(~n)⨸(~x),  (~x), (~x), (~b)*csc((~c) + (~d)*(~x)), "4_5_1_4_7") : nothing)

("4_5_1_4_8",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~m), (~x)) &&
    igt((~n), 0) ?
∫(ext_expand(((~e)*cot((~c) + (~d)*(~x)))^(~m), ((~a) + (~b)*csc((~c) + (~d)*(~x)))^(~n), (~x)), (~x)) : nothing)

("4_5_1_4_9",
@rule ∫(cot((~!c) + (~!d)*(~x))^(~!m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) &&
    ext_isinteger((~m)/2) &&
    ext_isinteger((~n) - 1/2) ?
-2*(~a)^((~m)⨸2 + (~n) + 1⨸2)⨸(~d)* int_and_subst((~x)^(~m)*(2 + (~a)*(~x)^2)^((~m)⨸2 + (~n) - 1⨸2)⨸(1 + (~a)*(~x)^2),  (~x), (~x), cot((~c) + (~d)*(~x))⨸sqrt((~a) + (~b)*csc((~c) + (~d)*(~x))), "4_5_1_4_9") : nothing)

("4_5_1_4_10",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~m), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) &&
    ilt((~n), 0) ?
(~a)^(2*(~n))*(~e)^(-2*(~n))* ∫(((~e)*cot((~c) + (~d)*(~x)))^((~m) + 2*(~n))⨸(-(~a) + (~b)*csc((~c) + (~d)*(~x)))^(~n), (~x)) : nothing)

("4_5_1_4_11",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~m), (~n), (~x)) &&
    eq((~a)^2 - (~b)^2, 0) &&
    !(ext_isinteger((~n))) ?
-2^((~m) + (~n) + 1)*((~e)*cot((~c) + (~d)*(~x)))^((~m) + 1)*((~a) + (~b)*csc((~c) + (~d)*(~x)))^ (~n)⨸((~d)*(~e)*((~m) + 1))*((~a)⨸((~a) + (~b)*csc((~c) + (~d)*(~x))))^((~m) + (~n) + 1)* appell_f1(((~m) + 1)⨸2, (~m) + (~n), 1, ((~m) + 3)⨸ 2, -((~a) - (~b)*csc((~c) + (~d)*(~x)))⨸((~a) + (~b)*csc((~c) + (~d)*(~x))), ((~a) - (~b)*csc((~c) + (~d)*(~x)))⨸((~a) + (~b)*csc((~c) + (~d)*(~x)))) : nothing)

("4_5_1_4_12",
@rule ∫(sqrt((~!e)*cot((~!c) + (~!d)*(~x)))/((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) ?
1⨸(~a)*∫(sqrt((~e)*cot((~c) + (~d)*(~x))), (~x)) - (~b)⨸(~a)*∫(sqrt((~e)*cot((~c) + (~d)*(~x)))⨸((~b) + (~a)*sin((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_4_13",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~m)/((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    igt((~m) - 1/2, 0) ?
-(~e)^2⨸(~b)^2*∫(((~e)*cot((~c) + (~d)*(~x)))^((~m) - 2)*((~a) - (~b)*csc((~c) + (~d)*(~x))), (~x)) + (~e)^2*((~a)^2 - (~b)^2)⨸(~b)^2* ∫(((~e)*cot((~c) + (~d)*(~x)))^((~m) - 2)⨸((~a) + (~b)*csc((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_4_14",
@rule ∫(1/(sqrt((~!e)*cot((~!c) + (~!d)*(~x)))*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) ?
1⨸(~a)*∫(1⨸sqrt((~e)*cot((~c) + (~d)*(~x))), (~x)) - (~b)⨸(~a)*∫(1⨸(sqrt((~e)*cot((~c) + (~d)*(~x)))*((~b) + (~a)*sin((~c) + (~d)*(~x)))), (~x)) : nothing)

("4_5_1_4_15",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~m)/((~a) + (~!b)*csc((~!c) + (~!d)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    ilt((~m) + 1/2, 0) ?
1⨸((~a)^2 - (~b)^2)*∫(((~e)*cot((~c) + (~d)*(~x)))^(~m)*((~a) - (~b)*csc((~c) + (~d)*(~x))), (~x)) + (~b)^2⨸((~e)^2*((~a)^2 - (~b)^2))* ∫(((~e)*cot((~c) + (~d)*(~x)))^((~m) + 2)⨸((~a) + (~b)*csc((~c) + (~d)*(~x))), (~x)) : nothing)

("4_5_1_4_16",
@rule ∫(cot((~!c) + (~!d)*(~x))^2*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~n), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) ?
∫((-1 + csc((~c) + (~d)*(~x))^2)*((~a) + (~b)*csc((~c) + (~d)*(~x)))^(~n), (~x)) : nothing)

("4_5_1_4_17",
@rule ∫(cot((~!c) + (~!d)*(~x))^(~m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~n), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    igt((~m)/2, 0) &&
    ext_isinteger((~n) - 1/2) ?
∫(ext_expand(((~a) + (~b)*csc((~c) + (~d)*(~x)))^ (~n), (-1 + csc((~c) + (~d)*(~x))^2)^((~m)⨸2), (~x)), (~x)) : nothing)

("4_5_1_4_18",
@rule ∫(cot((~!c) + (~!d)*(~x))^(~m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~n), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    ilt((~m)/2, 0) &&
    ext_isinteger((~n) - 1/2) &&
    eq((~m), -2) ?
∫(ext_expand(((~a) + (~b)*csc((~c) + (~d)*(~x)))^ (~n), (-1 + sec((~c) + (~d)*(~x))^2)^(-(~m)⨸2), (~x)), (~x)) : nothing)

("4_5_1_4_19",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~m), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    igt((~n), 0) ?
∫(ext_expand(((~e)*cot((~c) + (~d)*(~x)))^(~m), ((~a) + (~b)*csc((~c) + (~d)*(~x)))^(~n), (~x)), (~x)) : nothing)

("4_5_1_4_20",
@rule ∫(cot((~!c) + (~!d)*(~x))^(~!m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~x)) &&
    !eq((~a)^2 - (~b)^2, 0) &&
    ext_isinteger((~n)) &&
    ext_isinteger((~m)) &&
    (
        ext_isinteger((~m)/2) ||
        le((~m), 1)
    ) ?
∫(cos((~c) + (~d)*(~x))^(~m)*((~b) + (~a)*sin((~c) + (~d)*(~x)))^(~n)⨸sin((~c) + (~d)*(~x))^((~m) + (~n)), (~x)) : nothing)

# ("4_5_1_4_21",
# @rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~!m)*((~!a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~!n),(~x)) =>
#     !contains_var((~a), (~b), (~c), (~d), (~e), (~m), (~n), (~x)) ?
# Unintegrable[((~e)*cot((~c) + (~d)*(~x)))^(~m)*((~a) + (~b)*csc((~c) + (~d)*(~x)))^(~n), (~x)] : nothing)

("4_5_1_4_22",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x)))^(~m)*((~a) + (~!b)*sec((~!c) + (~!d)*(~x)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~m), (~n), (~x)) &&
    !(ext_isinteger((~m))) ?
((~e)*cot((~c) + (~d)*(~x)))^(~m)*tan((~c) + (~d)*(~x))^(~m)* ∫(((~a) + (~b)*sec((~c) + (~d)*(~x)))^(~n)⨸tan((~c) + (~d)*(~x))^(~m), (~x)) : nothing)

("4_5_1_4_23",
@rule ∫(((~!e)*tan((~!c) + (~!d)*(~x))^(~p))^(~m)*((~a) + (~!b)*sec((~!c) + (~!d)*(~x)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~m), (~n), (~p), (~x)) &&
    !(ext_isinteger((~m))) ?
((~e)*tan((~c) + (~d)*(~x))^(~p))^(~m)⨸((~e)*tan((~c) + (~d)*(~x)))^((~m)*(~p))* ∫(((~e)*tan((~c) + (~d)*(~x)))^((~m)*(~p))*((~a) + (~b)*sec((~c) + (~d)*(~x)))^(~n), (~x)) : nothing)

("4_5_1_4_24",
@rule ∫(((~!e)*cot((~!c) + (~!d)*(~x))^(~p))^(~m)*((~a) + (~!b)*csc((~!c) + (~!d)*(~x)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~m), (~n), (~p), (~x)) &&
    !(ext_isinteger((~m))) ?
((~e)*cot((~c) + (~d)*(~x))^(~p))^(~m)⨸((~e)*cot((~c) + (~d)*(~x)))^((~m)*(~p))* ∫(((~e)*cot((~c) + (~d)*(~x)))^((~m)*(~p))*((~a) + (~b)*csc((~c) + (~d)*(~x)))^(~n), (~x)) : nothing)


]
