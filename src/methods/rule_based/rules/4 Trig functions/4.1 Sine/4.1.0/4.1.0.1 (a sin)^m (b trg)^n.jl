file_rules = [
#(* ::Subsection::Closed:: *)
#(* 4.1.0.1 (a sin)^m (b trg)^n *)
("4_1_0_1_1",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~!m)*((~!b)*cos((~!e) + (~!f)*(~x)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~n), (~x)) &&
    eq((~m) + (~n) + 2, 0) &&
    !eq((~m), -1) ?
((~a)*sin((~e) + (~f)*(~x)))^((~m) + 1)*((~b)*cos((~e) + (~f)*(~x)))^((~n) + 1)⨸((~a)*(~b)*(~f)*((~m) + 1)) : nothing)

("4_1_0_1_2",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~!m)*cos((~!e) + (~!f)*(~x))^(~!n),(~x)) =>
    !contains_var((~a), (~e), (~f), (~m), (~x)) &&
    ext_isinteger(((~n) - 1)/2) &&
    !(
        ext_isinteger(((~m) - 1)/2) &&
        lt(0, (~m), (~n))
    ) ?
1⨸((~a)*(~f))* int_and_subst((~x)^(~m)*(1 - (~x)^2⨸(~a)^2)^(((~n) - 1)⨸2),  (~x), (~x), (~a)*sin((~e) + (~f)*(~x)), "4_1_0_1_2") : nothing)

("4_1_0_1_3",
@rule ∫(((~!a)*cos((~!e) + (~!f)*(~x)))^(~!m)*sin((~!e) + (~!f)*(~x))^(~!n),(~x)) =>
    !contains_var((~a), (~e), (~f), (~m), (~x)) &&
    ext_isinteger(((~n) - 1)/2) &&
    !(
        ext_isinteger(((~m) - 1)/2) &&
        gt((~m), 0) &&
        le((~m), (~n))
    ) ?
-1⨸((~a)*(~f))* int_and_subst((~x)^(~m)*(1 - (~x)^2⨸(~a)^2)^(((~n) - 1)⨸2),  (~x), (~x), (~a)*cos((~e) + (~f)*(~x)), "4_1_0_1_3") : nothing)

("4_1_0_1_4",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*cos((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~x)) &&
    gt((~m), 1) &&
    lt((~n), -1) &&
    (
        ext_isinteger(2*(~m), 2*(~n)) ||
        eq((~m) + (~n), 0)
    ) ?
-(~a)*((~a)*sin((~e) + (~f)*(~x)))^((~m) - 1)*((~b)*cos((~e) + (~f)*(~x)))^((~n) + 1)⨸((~b)* (~f)*((~n) + 1)) + (~a)^2*((~m) - 1)⨸((~b)^2*((~n) + 1))* ∫(((~a)*sin((~e) + (~f)*(~x)))^((~m) - 2)*((~b)*cos((~e) + (~f)*(~x)))^((~n) + 2), (~x)) : nothing)

("4_1_0_1_5",
@rule ∫(((~!a)*cos((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~x)) &&
    gt((~m), 1) &&
    lt((~n), -1) &&
    (
        ext_isinteger(2*(~m), 2*(~n)) ||
        eq((~m) + (~n), 0)
    ) ?
(~a)*((~a)*cos((~e) + (~f)*(~x)))^((~m) - 1)*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 1)⨸((~b)*(~f)*((~n) + 1)) + (~a)^2*((~m) - 1)⨸((~b)^2*((~n) + 1))* ∫(((~a)*cos((~e) + (~f)*(~x)))^((~m) - 2)*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 2), (~x)) : nothing)

("4_1_0_1_6",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*cos((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~n), (~x)) &&
    gt((~m), 1) &&
    !eq((~m) + (~n), 0) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
-(~a)*((~b)*cos((~e) + (~f)*(~x)))^((~n) + 1)*((~a)*sin((~e) + (~f)*(~x)))^((~m) - 1)⨸((~b)* (~f)*((~m) + (~n))) + (~a)^2*((~m) - 1)⨸((~m) + (~n))* ∫(((~b)*cos((~e) + (~f)*(~x)))^(~n)*((~a)*sin((~e) + (~f)*(~x)))^((~m) - 2), (~x)) : nothing)

("4_1_0_1_7",
@rule ∫(((~!a)*cos((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~n), (~x)) &&
    gt((~m), 1) &&
    !eq((~m) + (~n), 0) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
(~a)*((~b)*sin((~e) + (~f)*(~x)))^((~n) + 1)*((~a)*cos((~e) + (~f)*(~x)))^((~m) - 1)⨸((~b)*(~f)*((~m) + (~n))) + (~a)^2*((~m) - 1)⨸((~m) + (~n))* ∫(((~b)*sin((~e) + (~f)*(~x)))^(~n)*((~a)*cos((~e) + (~f)*(~x)))^((~m) - 2), (~x)) : nothing)

("4_1_0_1_8",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*cos((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~n), (~x)) &&
    lt((~m), -1) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
((~b)*cos((~e) + (~f)*(~x)))^((~n) + 1)*((~a)*sin((~e) + (~f)*(~x)))^((~m) + 1)⨸((~a)*(~b)*(~f)*((~m) + 1)) + ((~m) + (~n) + 2)⨸((~a)^2*((~m) + 1))* ∫(((~b)*cos((~e) + (~f)*(~x)))^(~n)*((~a)*sin((~e) + (~f)*(~x)))^((~m) + 2), (~x)) : nothing)

("4_1_0_1_9",
@rule ∫(((~!a)*cos((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~n), (~x)) &&
    lt((~m), -1) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
-((~b)*sin((~e) + (~f)*(~x)))^((~n) + 1)*((~a)*cos((~e) + (~f)*(~x)))^((~m) + 1)⨸((~a)*(~b)* (~f)*((~m) + 1)) + ((~m) + (~n) + 2)⨸((~a)^2*((~m) + 1))* ∫(((~b)*sin((~e) + (~f)*(~x)))^(~n)*((~a)*cos((~e) + (~f)*(~x)))^((~m) + 2), (~x)) : nothing)

("4_1_0_1_10",
@rule ∫(sqrt((~!a)*sin((~!e) + (~!f)*(~x)))*sqrt((~!b)*cos((~!e) + (~!f)*(~x))),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~x)) ?
sqrt((~a)*sin((~e) + (~f)*(~x)))*sqrt((~b)*cos((~e) + (~f)*(~x)))⨸sqrt(sin(2*(~e) + 2*(~f)*(~x)))* ∫(sqrt(sin(2*(~e) + 2*(~f)*(~x))), (~x)) : nothing)

("4_1_0_1_11",
@rule ∫(1/(sqrt((~!a)*sin((~!e) + (~!f)*(~x)))*sqrt((~!b)*cos((~!e) + (~!f)*(~x)))),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~x)) ?
sqrt(sin(2*(~e) + 2*(~f)*(~x)))⨸(sqrt((~a)*sin((~e) + (~f)*(~x)))*sqrt((~b)*cos((~e) + (~f)*(~x))))* ∫(1⨸sqrt(sin(2*(~e) + 2*(~f)*(~x))), (~x)) : nothing)

#(* Int[(a_.*sin[e_.+f_.*x_])^m_*(b_.*cos[e_.+f_.*x_])^n_,x_Symbol] := (a*Sin[e+f*x])^m*(b*Cos[e+f*x])^n/(a*Tan[e+f*x])^m*Int[(a*Tan[e+f*x] )^m,x] /; FreeQ[{a,b,e,f,m,n},x] && EqQ[m+n,0] *)
("4_1_0_1_12",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*cos((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~x)) &&
    eq((~m) + (~n), 0) &&
    gt((~m), 0) &&
    lt((~m), 1) ?
ext_den((~m))*(~a)*(~b)⨸(~f)* int_and_subst((~x)^(ext_den((~m))*((~m) + 1) - 1)⨸((~a)^2 + (~b)^2*(~x)^(2*ext_den((~m)))),  (~x), (~x), ((~a)*sin((~e) + (~f)*(~x)))^(1⨸ext_den((~m)))⨸((~b)*cos((~e) + (~f)*(~x)))^(1⨸ext_den((~m))), "4_1_0_1_12") : nothing)

("4_1_0_1_13",
@rule ∫(((~!a)*cos((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~x)) &&
    eq((~m) + (~n), 0) &&
    gt((~m), 0) &&
    lt((~m), 1) ?
-ext_den((~m))*(~a)*(~b)⨸(~f)* int_and_subst((~x)^(ext_den((~m))*((~m) + 1) - 1)⨸((~a)^2 + (~b)^2*(~x)^(2*ext_den((~m)))),  (~x), (~x), ((~a)*cos((~e) + (~f)*(~x)))^(1⨸ext_den((~m)))⨸((~b)*sin((~e) + (~f)*(~x)))^(1⨸ext_den((~m))), "4_1_0_1_13") : nothing)

#(* Int[(a_.*sin[e_.+f_.*x_])^m_*(b_.*cos[e_.+f_.*x_])^n_,x_Symbol] := b^(2*IntPart[(n-1)/2]+1)*(b*Cos[e+f*x])^(2*FracPart[(n-1)/2])/(a*f*( Cos[e+f*x]^2)^FracPart[(n-1)/2])* Subst[Int[x^m*(1-x^2/a^2)^((n-1)/2),x],x,a*Sin[e+f*x]] /; FreeQ[{a,b,e,f,m,n},x] && (RationalQ[n] || Not[RationalQ[m]] &&  (EqQ[b,1] || NeQ[a,1])) *)
#(* Int[(a_.*cos[e_.+f_.*x_])^m_*(b_.*sin[e_.+f_.*x_])^n_,x_Symbol] := -b^(2*IntPart[(n-1)/2]+1)*(b*Sin[e+f*x])^(2*FracPart[(n-1)/2])/(a*f* (Sin[e+f*x]^2)^FracPart[(n-1)/2])* Subst[Int[x^m*(1-x^2/a^2)^((n-1)/2),x],x,a*Cos[e+f*x]] /; FreeQ[{a,b,e,f,m,n},x] *)
("4_1_0_1_14",
@rule ∫(((~!a)*cos((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sin((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~n), (~x)) &&
    simpler((~n), (~m)) ?
-(~b)^(2*intpart(((~n) - 1)⨸2) + 1)*((~b)*sin((~e) + (~f)*(~x)))^(2* fracpart(((~n) - 1)⨸2))*((~a)*cos((~e) + (~f)*(~x)))^((~m) + 1)⨸((~a)* (~f)*((~m) + 1)*(sin((~e) + (~f)*(~x))^2)^fracpart(((~n) - 1)⨸2))* hypergeometric2f1((1 + (~m))⨸2, (1 - (~n))⨸2, (3 + (~m))⨸2, cos((~e) + (~f)*(~x))^2) : nothing)

("4_1_0_1_15",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*cos((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~n), (~x)) ?
(~b)^(2*intpart(((~n) - 1)⨸2) + 1)*((~b)*cos((~e) + (~f)*(~x)))^(2* fracpart(((~n) - 1)⨸2))*((~a)*sin((~e) + (~f)*(~x)))^((~m) + 1)⨸((~a)* (~f)*((~m) + 1)*(cos((~e) + (~f)*(~x))^2)^fracpart(((~n) - 1)⨸2))* hypergeometric2f1((1 + (~m))⨸2, (1 - (~n))⨸2, (3 + (~m))⨸2, sin((~e) + (~f)*(~x))^2) : nothing)

("4_1_0_1_16",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~!m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~!n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~n), (~x)) &&
    eq((~m) - (~n) + 2, 0) &&
    !eq((~m), -1) ?
(~b)*((~a)*sin((~e) + (~f)*(~x)))^((~m) + 1)*((~b)*sec((~e) + (~f)*(~x)))^((~n) - 1)⨸((~a)*(~f)*((~m) + 1)) : nothing)

("4_1_0_1_17",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~x)) &&
    gt((~n), 1) &&
    gt((~m), 1) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
(~a)*(~b)*((~a)*sin((~e) + (~f)*(~x)))^((~m) - 1)*((~b)*sec((~e) + (~f)*(~x)))^((~n) - 1)⨸((~f)*((~n) - 1)) - (~a)^2*(~b)^2*((~m) - 1)⨸((~n) - 1)* ∫(((~a)*sin((~e) + (~f)*(~x)))^((~m) - 2)*((~b)*sec((~e) + (~f)*(~x)))^((~n) - 2), (~x)) : nothing)

("4_1_0_1_18",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~x)) &&
    gt((~n), 1) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
((~a)*sin((~e) + (~f)*(~x)))^((~m) + 1)*((~b)*sec((~e) + (~f)*(~x)))^((~n) + 1)⨸((~a)*(~b)*(~f)*((~m) - (~n))) - ((~n) + 1)⨸((~b)^2*((~m) - (~n)))* ∫(((~a)*sin((~e) + (~f)*(~x)))^(~m)*((~b)*sec((~e) + (~f)*(~x)))^((~n) + 2), (~x)) : nothing)

("4_1_0_1_19",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~x)) &&
    lt((~n), -1) &&
    lt((~m), -1) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
((~a)*sin((~e) + (~f)*(~x)))^((~m) + 1)*((~b)*sec((~e) + (~f)*(~x)))^((~n) + 1)⨸((~a)*(~b)*(~f)*((~m) + 1)) - ((~n) + 1)⨸((~a)^2*(~b)^2*((~m) + 1))* ∫(((~a)*sin((~e) + (~f)*(~x)))^((~m) + 2)*((~b)*sec((~e) + (~f)*(~x)))^((~n) + 2), (~x)) : nothing)

("4_1_0_1_20",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~x)) &&
    lt((~n), -1) &&
    !eq((~m) - (~n), 0) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
((~a)*sin((~e) + (~f)*(~x)))^((~m) + 1)*((~b)*sec((~e) + (~f)*(~x)))^((~n) + 1)⨸((~a)*(~b)*(~f)*((~m) - (~n))) - ((~n) + 1)⨸((~b)^2*((~m) - (~n)))* ∫(((~a)*sin((~e) + (~f)*(~x)))^(~m)*((~b)*sec((~e) + (~f)*(~x)))^((~n) + 2), (~x)) : nothing)

("4_1_0_1_21",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~n), (~x)) &&
    gt((~m), 1) &&
    !eq((~m) - (~n), 0) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
-(~a)*(~b)*((~a)*sin((~e) + (~f)*(~x)))^((~m) - 1)*((~b)*sec((~e) + (~f)*(~x)))^((~n) - 1)⨸((~f)*((~m) - (~n))) + (~a)^2*((~m) - 1)⨸((~m) - (~n))* ∫(((~a)*sin((~e) + (~f)*(~x)))^((~m) - 2)*((~b)*sec((~e) + (~f)*(~x)))^(~n), (~x)) : nothing)

("4_1_0_1_22",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~n), (~x)) &&
    lt((~m), -1) &&
    ext_isinteger(2*(~m), 2*(~n)) ?
(~b)*((~a)*sin((~e) + (~f)*(~x)))^((~m) + 1)*((~b)*sec((~e) + (~f)*(~x)))^((~n) - 1)⨸((~a)*(~f)*((~m) + 1)) + ((~m) - (~n) + 2)⨸((~a)^2*((~m) + 1))* ∫(((~a)*sin((~e) + (~f)*(~x)))^((~m) + 2)*((~b)*sec((~e) + (~f)*(~x)))^(~n), (~x)) : nothing)

("4_1_0_1_23",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~n), (~x)) &&
    ext_isinteger((~m) - 1/2) &&
    ext_isinteger((~n) - 1/2) ?
((~b)*cos((~e) + (~f)*(~x)))^(~n)*((~b)*sec((~e) + (~f)*(~x)))^(~n)* ∫(((~a)*sin((~e) + (~f)*(~x)))^(~m)⨸((~b)*cos((~e) + (~f)*(~x)))^(~n), (~x)) : nothing)

("4_1_0_1_24",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~n), (~x)) &&
    !(ext_isinteger((~m))) &&
    !(ext_isinteger((~n))) &&
    lt((~n), 1) ?
1⨸(~b)^2*((~b)*cos((~e) + (~f)*(~x)))^((~n) + 1)*((~b)*sec((~e) + (~f)*(~x)))^((~n) + 1)* ∫(((~a)*sin((~e) + (~f)*(~x)))^(~m)⨸((~b)*cos((~e) + (~f)*(~x)))^(~n), (~x)) : nothing)

("4_1_0_1_25",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!b)*sec((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~n), (~x)) &&
    !(ext_isinteger((~m))) &&
    !(ext_isinteger((~n))) ?
(~b)^2*((~b)*cos((~e) + (~f)*(~x)))^((~n) - 1)*((~b)*sec((~e) + (~f)*(~x)))^((~n) - 1)* ∫(((~a)*sin((~e) + (~f)*(~x)))^(~m)⨸((~b)*cos((~e) + (~f)*(~x)))^(~n), (~x)) : nothing)

("4_1_0_1_26",
@rule ∫(((~!a)*sin((~!e) + (~!f)*(~x)))^(~!m)*((~!b)*csc((~!e) + (~!f)*(~x)))^(~n),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~m), (~n), (~x)) &&
    !(ext_isinteger((~m))) &&
    !(ext_isinteger((~n))) ?
((~a)*(~b))^intpart((~n))*((~a)*sin((~e) + (~f)*(~x)))^fracpart((~n))*((~b)*csc((~e) + (~f)*(~x)))^ fracpart((~n))*∫(((~a)*sin((~e) + (~f)*(~x)))^((~m) - (~n)), (~x)) : nothing)


]
