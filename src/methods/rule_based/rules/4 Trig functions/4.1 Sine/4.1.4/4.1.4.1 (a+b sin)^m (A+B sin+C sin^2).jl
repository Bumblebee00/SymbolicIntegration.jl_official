file_rules = [
#(* ::Subsection::Closed:: *)
#(* 4.1.4.1 (a+b sin)^m (A+B sin+C sin^2) *)
("4_1_4_1_1",
@rule ∫(((~!b)*sin((~!e) + (~!f)*(~x)))^ (~!m)*((~!B)*sin((~!e) + (~!f)*(~x)) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~b), (~e), (~f), (~B), (~C), (~m), (~x)) ?
1⨸(~b)*∫(((~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)*((~B) + (~C)*sin((~e) + (~f)*(~x))), (~x)) : nothing)

("4_1_4_1_2",
@rule ∫(((~!b)*sin((~!e) + (~!f)*(~x)))^(~!m)*((~A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~b), (~e), (~f), (~A), (~C), (~m), (~x)) &&
    eq((~A)*((~m) + 2) + (~C)*((~m) + 1), 0) ?
(~A)*cos((~e) + (~f)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)⨸((~b)*(~f)*((~m) + 1)) : nothing)

("4_1_4_1_3",
@rule ∫(((~!b)*sin((~!e) + (~!f)*(~x)))^(~m)*((~A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~b), (~e), (~f), (~A), (~C), (~x)) &&
    lt((~m), -1) ?
(~A)*cos( (~e) + (~f)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)⨸((~b)*(~f)*((~m) + 1)) + ((~A)*((~m) + 2) + (~C)*((~m) + 1))⨸((~b)^2*((~m) + 1))*∫(((~b)*sin((~e) + (~f)*(~x)))^((~m) + 2), (~x)) : nothing)

("4_1_4_1_4",
@rule ∫(sin((~!e) + (~!f)*(~x))^(~!m)*((~A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~e), (~f), (~A), (~C), (~x)) &&
    igt(((~m) + 1)/2, 0) ?
-1⨸(~f)*int_and_subst((1 - (~x)^2)^(((~m) - 1)⨸2)*((~A) + (~C) - (~C)*(~x)^2),  (~x), (~x), cos((~e) + (~f)*(~x)), "4_1_4_1_4") : nothing)

("4_1_4_1_5",
@rule ∫(((~!b)*sin((~!e) + (~!f)*(~x)))^(~!m)*((~A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~b), (~e), (~f), (~A), (~C), (~m), (~x)) &&
    !(lt((~m), -1)) ?
-(~C)*cos( (~e) + (~f)*(~x))*((~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)⨸((~b)*(~f)*((~m) + 2)) + ((~A)*((~m) + 2) + (~C)*((~m) + 1))⨸((~m) + 2)*∫(((~b)*sin((~e) + (~f)*(~x)))^(~m), (~x)) : nothing)

("4_1_4_1_6",
@rule ∫(((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^ (~!m)*((~!A) + (~!B)*sin((~!e) + (~!f)*(~x)) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~B), (~C), (~m), (~x)) &&
    eq((~A)*(~b)^2 - (~a)*(~b)*(~B) + (~a)^2*(~C), 0) ?
1⨸(~b)^2* ∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)* simp((~b)*(~B) - (~a)*(~C) + (~b)*(~C)*sin((~e) + (~f)*(~x)), (~x)), (~x)) : nothing)

("4_1_4_1_7",
@rule ∫(((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~!m)*((~!A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~C), (~m), (~x)) &&
    eq((~A)*(~b)^2 + (~a)^2*(~C), 0) ?
(~C)⨸(~b)^2* ∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)*simp(-(~a) + (~b)*sin((~e) + (~f)*(~x)), (~x)), (~x)) : nothing)

("4_1_4_1_8",
@rule ∫(((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^ (~!m)*((~!A) + (~!B)*sin((~!e) + (~!f)*(~x)) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~B), (~C), (~m), (~x)) &&
    eq((~A) - (~B) + (~C), 0) &&
    !(ext_isinteger(2*(~m))) ?
((~A) - (~C))*∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~m)*(1 + sin((~e) + (~f)*(~x))), (~x)) + (~C)*∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~m)*(1 + sin((~e) + (~f)*(~x)))^2, (~x)) : nothing)

("4_1_4_1_9",
@rule ∫(((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~!m)*((~!A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~C), (~m), (~x)) &&
    eq((~A) + (~C), 0) &&
    !(ext_isinteger(2*(~m))) ?
((~A) - (~C))*∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~m)*(1 + sin((~e) + (~f)*(~x))), (~x)) + (~C)*∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~m)*(1 + sin((~e) + (~f)*(~x)))^2, (~x)) : nothing)

("4_1_4_1_10",
@rule ∫(((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^ (~m)*((~!A) + (~!B)*sin((~!e) + (~!f)*(~x)) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~B), (~C), (~x)) &&
    lt((~m), -1) &&
    eq((~a)^2 - (~b)^2, 0) ?
((~A)*(~b) - (~a)*(~B) + (~b)*(~C))* cos((~e) + (~f)*(~x))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~m)⨸((~a)*(~f)*(2*(~m) + 1)) + 1⨸((~a)^2*(2*(~m) + 1))* ∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)* simp((~a)*(~A)*((~m) + 1) + (~m)*((~b)*(~B) - (~a)*(~C)) + (~b)*(~C)*(2*(~m) + 1)*sin((~e) + (~f)*(~x)), (~x)), (~x)) : nothing)

("4_1_4_1_11",
@rule ∫(((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~C), (~x)) &&
    lt((~m), -1) &&
    eq((~a)^2 - (~b)^2, 0) ?
(~b)*((~A) + (~C))*cos((~e) + (~f)*(~x))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~m)⨸((~a)*(~f)*(2*(~m) + 1)) + 1⨸((~a)^2*(2*(~m) + 1))* ∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)* simp((~a)*(~A)*((~m) + 1) - (~a)*(~C)*(~m) + (~b)*(~C)*(2*(~m) + 1)*sin((~e) + (~f)*(~x)), (~x)), (~x)) : nothing)

("4_1_4_1_12",
@rule ∫(((~!a) + (~!b)*sin((~!e) + (~!f)*(~x)))^ (~m)*((~!A) + (~!B)*sin((~!e) + (~!f)*(~x)) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~B), (~C), (~x)) &&
    lt((~m), -1) &&
    !eq((~a)^2 - (~b)^2, 0) ?
-((~A)*(~b)^2 - (~a)*(~b)*(~B) + (~a)^2*(~C))* cos((~e) + (~f)*(~x))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)⨸((~b)* (~f)*((~m) + 1)*((~a)^2 - (~b)^2)) + 1⨸((~b)*((~m) + 1)*((~a)^2 - (~b)^2))* ∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)* simp((~b)*((~a)*(~A) - (~b)*(~B) + (~a)*(~C))*((~m) + 1) - ((~A)*(~b)^2 - (~a)*(~b)*(~B) + (~a)^2*(~C) + (~b)*((~A)*(~b) - (~a)*(~B) + (~b)*(~C))*((~m) + 1))*sin((~e) + (~f)*(~x)), (~x)), (~x)) : nothing)

("4_1_4_1_13",
@rule ∫(((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~m)*((~!A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~C), (~x)) &&
    lt((~m), -1) &&
    !eq((~a)^2 - (~b)^2, 0) ?
-((~A)*(~b)^2 + (~a)^2*(~C))* cos((~e) + (~f)*(~x))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)⨸((~b)* (~f)*((~m) + 1)*((~a)^2 - (~b)^2)) + 1⨸((~b)*((~m) + 1)*((~a)^2 - (~b)^2))* ∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)* simp((~a)*(~b)*((~A) + (~C))*((~m) + 1) - ((~A)*(~b)^2 + (~a)^2*(~C) + (~b)^2*((~A) + (~C))*((~m) + 1))*sin((~e) + (~f)*(~x)), (~x)), (~x)) : nothing)

("4_1_4_1_14",
@rule ∫(((~!a) + (~!b)*sin((~!e) + (~!f)*(~x)))^ (~!m)*((~!A) + (~!B)*sin((~!e) + (~!f)*(~x)) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~B), (~C), (~m), (~x)) &&
    !(lt((~m), -1)) ?
-(~C)*cos((~e) + (~f)*(~x))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)⨸((~b)*(~f)*((~m) + 2)) + 1⨸((~b)*((~m) + 2))* ∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~m)* simp((~A)*(~b)*((~m) + 2) + (~b)*(~C)*((~m) + 1) + ((~b)*(~B)*((~m) + 2) - (~a)*(~C))*sin((~e) + (~f)*(~x)), (~x)), (~x)) : nothing)

("4_1_4_1_15",
@rule ∫(((~a) + (~!b)*sin((~!e) + (~!f)*(~x)))^(~!m)*((~!A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~a), (~b), (~e), (~f), (~A), (~C), (~m), (~x)) &&
    !(lt((~m), -1)) ?
-(~C)*cos((~e) + (~f)*(~x))*((~a) + (~b)*sin((~e) + (~f)*(~x)))^((~m) + 1)⨸((~b)*(~f)*((~m) + 2)) + 1⨸((~b)*((~m) + 2))* ∫(((~a) + (~b)*sin((~e) + (~f)*(~x)))^(~m)* simp((~A)*(~b)*((~m) + 2) + (~b)*(~C)*((~m) + 1) - (~a)*(~C)*sin((~e) + (~f)*(~x)), (~x)), (~x)) : nothing)

("4_1_4_1_16",
@rule ∫(((~!b)*sin((~!e) + (~!f)*(~x))^(~p))^ (~m)*((~!A) + (~!B)*sin((~!e) + (~!f)*(~x)) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~b), (~e), (~f), (~A), (~B), (~C), (~m), (~p), (~x)) &&
    !(ext_isinteger((~m))) ?
((~b)*sin((~e) + (~f)*(~x))^(~p))^(~m)⨸((~b)*sin((~e) + (~f)*(~x)))^((~m)*(~p))* ∫(((~b)*sin((~e) + (~f)*(~x)))^((~m)*(~p))*((~A) + (~B)*sin((~e) + (~f)*(~x)) + (~C)*sin((~e) + (~f)*(~x))^2), (~x)) : nothing)

("4_1_4_1_17",
@rule ∫(((~!b)*cos((~!e) + (~!f)*(~x))^(~p))^ (~m)*((~!A) + (~!B)*cos((~!e) + (~!f)*(~x)) + (~!C)*cos((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~b), (~e), (~f), (~A), (~B), (~C), (~m), (~p), (~x)) &&
    !(ext_isinteger((~m))) ?
((~b)*cos((~e) + (~f)*(~x))^(~p))^(~m)⨸((~b)*cos((~e) + (~f)*(~x)))^((~m)*(~p))* ∫(((~b)*cos((~e) + (~f)*(~x)))^((~m)*(~p))*((~A) + (~B)*cos((~e) + (~f)*(~x)) + (~C)*cos((~e) + (~f)*(~x))^2), (~x)) : nothing)

("4_1_4_1_18",
@rule ∫(((~!b)*sin((~!e) + (~!f)*(~x))^(~p))^(~m)*((~!A) + (~!C)*sin((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~b), (~e), (~f), (~A), (~C), (~m), (~p), (~x)) &&
    !(ext_isinteger((~m))) ?
((~b)*sin((~e) + (~f)*(~x))^(~p))^(~m)⨸((~b)*sin((~e) + (~f)*(~x)))^((~m)*(~p))* ∫(((~b)*sin((~e) + (~f)*(~x)))^((~m)*(~p))*((~A) + (~C)*sin((~e) + (~f)*(~x))^2), (~x)) : nothing)

("4_1_4_1_19",
@rule ∫(((~!b)*cos((~!e) + (~!f)*(~x))^(~p))^(~m)*((~!A) + (~!C)*cos((~!e) + (~!f)*(~x))^2),(~x)) =>
    !contains_var((~b), (~e), (~f), (~A), (~C), (~m), (~p), (~x)) &&
    !(ext_isinteger((~m))) ?
((~b)*cos((~e) + (~f)*(~x))^(~p))^(~m)⨸((~b)*cos((~e) + (~f)*(~x)))^((~m)*(~p))* ∫(((~b)*cos((~e) + (~f)*(~x)))^((~m)*(~p))*((~A) + (~C)*cos((~e) + (~f)*(~x))^2), (~x)) : nothing)


]
