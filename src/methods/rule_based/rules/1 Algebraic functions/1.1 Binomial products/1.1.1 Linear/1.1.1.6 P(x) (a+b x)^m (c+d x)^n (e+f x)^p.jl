file_rules = [
#(* ::Subsection::Closed:: *)
#(* 1.1.1.6 P(x) (a+b x)^m (c+d x)^n (e+f x)^p *)
("1_1_1_6_1",
@rule ∫((~Px)*((~!a) + (~!b)*(~x))^(~!m)*((~!c) + (~!d)*(~x))^(~!n)*((~!e) + (~!f)*(~x))^(~!p),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~m), (~n), (~p), (~x)) &&
    poly((~Px), (~x)) &&
    eq((~b)*(~c) + (~a)*(~d), 0) &&
    eq((~m), (~n)) &&
    (
        ext_isinteger((~m)) ||
        gt((~a), 0) &&
        gt((~c), 0)
    ) ?
∫((~Px)*((~a)*(~c) + (~b)*(~d)*(~x)^2)^(~m)*((~e) + (~f)*(~x))^(~p), (~x)) : nothing)

("1_1_1_6_2",
@rule ∫((~Px)*((~!a) + (~!b)*(~x))^(~m)*((~!c) + (~!d)*(~x))^(~n)*((~!e) + (~!f)*(~x))^(~!p),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~m), (~n), (~p), (~x)) &&
    poly((~Px), (~x)) &&
    eq((~b)*(~c) + (~a)*(~d), 0) &&
    eq((~m), (~n)) &&
    !(ext_isinteger((~m))) ?
((~a) + (~b)*(~x))^ fracpart((~m))*((~c) + (~d)*(~x))^fracpart((~m))⨸((~a)*(~c) + (~b)*(~d)*(~x)^2)^fracpart((~m))* ∫((~Px)*((~a)*(~c) + (~b)*(~d)*(~x)^2)^(~m)*((~e) + (~f)*(~x))^(~p), (~x)) : nothing)

("1_1_1_6_3",
@rule ∫((~Px)*((~!a) + (~!b)*(~x))^(~!m)*((~!c) + (~!d)*(~x))^(~!n)*((~!e) + (~!f)*(~x))^(~!p),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~m), (~n), (~p), (~x)) &&
    poly((~Px), (~x)) &&
    eq(poly_remainder((~Px), (~a) + (~b)*(~x), (~x)), 0) ?
∫(poly_quotient((~Px), (~a) + (~b)*(~x), (~x))*((~a) + (~b)*(~x))^((~m) + 1)*((~c) + (~d)*(~x))^ (~n)*((~e) + (~f)*(~x))^(~p), (~x)) : nothing)

("1_1_1_6_4",
@rule ∫((~Px)*((~!a) + (~!b)*(~x))^(~!m)*((~!c) + (~!d)*(~x))^(~!n)*((~!e) + (~!f)*(~x))^(~!p),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~m), (~n), (~p), (~x)) &&
    poly((~Px), (~x)) &&
    ext_isinteger((~m), (~n)) ?
∫(ext_expand((~Px)*((~a) + (~b)*(~x))^(~m)*((~c) + (~d)*(~x))^(~n)*((~e) + (~f)*(~x))^(~p), (~x)), (~x)) : nothing)

("1_1_1_6_5",
@rule ∫((~Px)*((~!a) + (~!b)*(~x))^(~m)*((~!c) + (~!d)*(~x))^(~!n)*((~!e) + (~!f)*(~x))^(~!p),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~n), (~p), (~x)) &&
    poly((~Px), (~x)) &&
    ilt((~m), -1) ?
(~b)*poly_remainder((~Px), (~a) + (~b)*(~x), (~x))*((~a) + (~b)*(~x))^((~m) + 1)*((~c) + (~d)*(~x))^((~n) + 1)*((~e) + (~f)*(~x))^((~p) + 1)⨸(((~m) + 1)*((~b)*(~c) - (~a)*(~d))*((~b)*(~e) - (~a)*(~f))) + 1⨸(((~m) + 1)*((~b)*(~c) - (~a)*(~d))*((~b)*(~e) - (~a)*(~f)))* ∫(((~a) + (~b)*(~x))^((~m) + 1)*((~c) + (~d)*(~x))^(~n)*((~e) + (~f)*(~x))^(~p)* expand_to_sum(((~m) + 1)*((~b)*(~c) - (~a)*(~d))*((~b)*(~e) - (~a)*(~f))*poly_quotient((~Px), (~a) + (~b)*(~x), (~x)) + (~a)*(~d)*(~f)*poly_remainder((~Px), (~a) + (~b)*(~x), (~x))*((~m) + 1) - (~b)*poly_remainder((~Px), (~a) + (~b)*(~x), (~x))*((~d)*(~e)*((~m) + (~n) + 2) + (~c)*(~f)*((~m) + (~p) + 2)) - (~b)*(~d)*(~f)*poly_remainder((~Px), (~a) + (~b)*(~x), (~x))*((~m) + (~n) + (~p) + 3)*(~x), (~x)), (~x)) : nothing)

("1_1_1_6_6",
@rule ∫((~Px)*((~!a) + (~!b)*(~x))^(~m)*((~!c) + (~!d)*(~x))^(~!n)*((~!e) + (~!f)*(~x))^(~!p),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~n), (~p), (~x)) &&
    poly((~Px), (~x)) &&
    lt((~m), -1) &&
    ext_isinteger(2*(~m), 2*(~n), 2*(~p)) ?
(~b)*poly_remainder((~Px), (~a) + (~b)*(~x), (~x))*((~a) + (~b)*(~x))^((~m) + 1)*((~c) + (~d)*(~x))^((~n) + 1)*((~e) + (~f)*(~x))^((~p) + 1)⨸(((~m) + 1)*((~b)*(~c) - (~a)*(~d))*((~b)*(~e) - (~a)*(~f))) + 1⨸(((~m) + 1)*((~b)*(~c) - (~a)*(~d))*((~b)*(~e) - (~a)*(~f)))* ∫(((~a) + (~b)*(~x))^((~m) + 1)*((~c) + (~d)*(~x))^(~n)*((~e) + (~f)*(~x))^(~p)* expand_to_sum(((~m) + 1)*((~b)*(~c) - (~a)*(~d))*((~b)*(~e) - (~a)*(~f))*poly_quotient((~Px), (~a) + (~b)*(~x), (~x)) + (~a)*(~d)*(~f)*poly_remainder((~Px), (~a) + (~b)*(~x), (~x))*((~m) + 1) - (~b)*poly_remainder((~Px), (~a) + (~b)*(~x), (~x))*((~d)*(~e)*((~m) + (~n) + 2) + (~c)*(~f)*((~m) + (~p) + 2)) - (~b)*(~d)*(~f)*poly_remainder((~Px), (~a) + (~b)*(~x), (~x))*((~m) + (~n) + (~p) + 3)*(~x), (~x)), (~x)) : nothing)

("1_1_1_6_7",
@rule ∫((~Px)*((~!a) + (~!b)*(~x))^(~!m)*((~!c) + (~!d)*(~x))^(~!n)*((~!e) + (~!f)*(~x))^(~!p),(~x)) =>
    !contains_var((~a), (~b), (~c), (~d), (~e), (~f), (~m), (~n), (~p), (~x)) &&
    poly((~Px), (~x)) &&
    !eq((~m) + (~n) + (~p) + exponent_of((~Px), (~x)) + 1, 0) ?
ext_coeff((~Px), (~x), exponent_of((~Px), (~x)))*((~a) + (~b)*(~x))^((~m) + exponent_of((~Px), (~x)) - 1)*((~c) + (~d)*(~x))^((~n) + 1)*((~e) + (~f)*(~x))^((~p) + 1)⨸((~d)*(~f)* (~b)^(exponent_of((~Px), (~x)) - 1)*((~m) + (~n) + (~p) + exponent_of((~Px), (~x)) + 1)) + 1⨸((~d)*(~f)*(~b)^exponent_of((~Px), (~x))*((~m) + (~n) + (~p) + exponent_of((~Px), (~x)) + 1))* ∫(((~a) + (~b)*(~x))^(~m)*((~c) + (~d)*(~x))^(~n)*((~e) + (~f)*(~x))^(~p)* expand_to_sum( (~d)*(~f)*(~b)^exponent_of((~Px), (~x))*((~m) + (~n) + (~p) + exponent_of((~Px), (~x)) + 1)*(~Px) - (~d)*(~f)*ext_coeff((~Px), (~x), exponent_of((~Px), (~x)))*((~m) + (~n) + (~p) + exponent_of((~Px), (~x)) + 1)*((~a) + (~b)*(~x))^exponent_of((~Px), (~x)) + ext_coeff((~Px), (~x), exponent_of((~Px), (~x)))*((~a) + (~b)*(~x))^(exponent_of((~Px), (~x)) - 2)*((~a)^2*(~d)*(~f)*((~m) + (~n) + (~p) + exponent_of((~Px), (~x)) + 1) - (~b)*((~b)*(~c)*(~e)*((~m) + exponent_of((~Px), (~x)) - 1) + (~a)*((~d)*(~e)*((~n) + 1) + (~c)*(~f)*((~p) + 1))) + (~b)*((~a)*(~d)*(~f)*(2*((~m) + exponent_of((~Px), (~x))) + (~n) + (~p)) - (~b)*((~d)*(~e)*((~m) + exponent_of((~Px), (~x)) + (~n)) + (~c)*(~f)*((~m) + exponent_of((~Px), (~x)) + (~p))))*(~x)), (~x)), (~x)) : nothing)


]
